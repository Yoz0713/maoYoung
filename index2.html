<!DOCTYPE html>
<html lang="zh-tw">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>demo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2&family=Lora:wght@400;500&family=Noto+Serif+TC:wght@200;300;400;500;600;700;900&family=Roboto+Mono:wght@100;200;300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.2.3/swiper-bundle.css">
    <link rel="stylesheet" href="./css/all.css">

</head>

<body>
    <div class="first-page">
        <video src="./video1.mp4" loop autoplay muted playsinline></video>
        <div class="speaker">
            <img src="./audioOff.svg" class="off active">
            <img src="./audioOn.svg" class="on">
        </div>
    </div>

    <div class="second-half-page">
        <div class="left">
            <div class="imgBox">
                <img src="./img/jpg/second-half-page-bg1.jpg">
            </div>
            <div class="titleBox">
                <h2 class="ch">走過12,000個晝夜，<br>
                    點亮近2,000個家庭的暖心燈火</h2>
                <div class="paraBox">
                    <div class="line"></div>
                    <p class="para">
                        從而立邁向不惑之年，茂洋建設不忘建築初心並鑑往知來，取經日本「里山倡議」，<br>
                        主張城市與自然共存，尊重大地紋理，在最適宜的地段、造出最合宜的房子，願成為<br>
                        您與⼭之間，最美好的相遇。
                    </p>
                </div>
            </div>
        </div>
        <div class="right">
            <div class="imgBox">
                <img src="./img/jpg/second-half-page-bg2.jpg">
            </div>
        </div>
        <div class="maoyoung">
            <img src="./img/svg/maoyoung.svg">
            <img src="./img/svg/33.svg">
        </div>
    </div>
    <div class="second-page">
        <div class="bg">
            <img src="./img/jpg/second-page-bg.jpg" class="computer">
            <img src="./img/jpg/second-page-bg-ph.jpg" class="phone">
            <div id="pixi-container">

            </div>
        </div>
        <div class="swiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <p>齊美</p>
                    <img src="./img/jpg/second-page-swiper1-chimei.png">
                </div>
                <div class="swiper-slide">
                    <p>瑞美</p>
                    <img src="./img/jpg/second-page-swiper2-liumei.png">
                </div>
                <div class="swiper-slide">
                    <p class="young">晴山洋洋</p>
                    <img src="./img/jpg/second-page-swiper3-youngyoung.png">
                </div>
                <div class="swiper-slide">
                    <p>閱美</p>
                    <img src="./img/jpg/second-page-swiper4-yuemei.png">
                </div>
                <div class="swiper-slide">
                    <p>漾世紀</p>
                    <img src="./img/jpg/second-page-swiper5-century.png">
                </div>
                <div class="swiper-slide">
                    <p>大美</p>
                    <img src="./img/jpg/second-page-swiper6-damei.png">
                </div>

            </div>
        </div>
        <img class="island" src="./img/jpg/second-page-tree.png">
    </div>

    <div class="third-page">
        <div class="titleBox">
            <h2 class="en">Master The Best Time</h2>
            <h2 class="en"> The Best Location.</h2>
        </div>
        <div class="imgBox">
            <img src="./img/jpg/lifefunction.jpg">
            <div class="glow-wrapper">

            </div>
            <div class="hand phone">
                <img src="https://ws.srl.tw/product_html/case202108251357572/img/img2021082515375891.png">
            </div>
        </div>
        <div class="seagullBox">
            <img src="./img/svg/seagull1.svg">
            <img src="./img/svg/seagull2.svg">
            <img src="./img/svg/seagull1.svg">
            <img src="./img/svg/seagull2.svg">
        </div>
    </div>
    <div class="forth-page">
        <div class="titleBox">
            <h2 class="ch">縱橫交通之核<br>
                近享中科-東海地利之便</h2>
            <div class="paraBox">
                <div class="line"></div>
                <p class="para">正處縱橫之心的東海商圈，受惠向上路、台灣大道雙交通命脈而蓬勃發展，<br>
                    更因周邊空港、雙國道等完善路網簇擁而享有地利之便，未來再迎特五號<br>
                    開通引流科技新貴西進，為周邊房價再注入活水!</p>
            </div>
        </div>
        <div class="swiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <img src="./img/jpg/forth-page-swiper1.jpg">
                    <div class="box">
                        <p class="minute"><span>3</span>mins</p>
                        <p class="thumb">國道三號龍井交流道實景圖</p>
                    </div>
                </div>
                <div class="swiper-slide">
                    <img src="./img/jpg/forth-page-swiper2.jpg">
                    <div class="box">
                        <p class="minute"><span>2</span>mins</p>
                        <p class="thumb">特五號道路實景圖</p>
                    </div>
                </div>
                <div class="swiper-slide">
                    <img src="./img/jpg/forth-page-swiper3.jpg">
                    <div class="box">
                        <p class="minute"><span>2</span>mins</p>
                        <p class="thumb">向上路實景圖</p>
                    </div>
                </div>
                <div class="swiper-slide" class="computer">
                    <img src="./img/jpg/forth-page-swiper1.jpg">
                    <div class="box">
                        <p class="minute"><span>3</span>mins</p>
                        <p class="thumb">國道三號龍井交流道實景圖</p>
                    </div>
                </div>
                <div class="swiper-slide" class="computer">
                    <img src="./img/jpg/forth-page-swiper2.jpg">
                    <div class="box">
                        <p class="minute"><span>2</span>mins</p>
                        <p class="thumb">特五號道路實景圖</p>
                    </div>
                </div>
                <div class="swiper-slide" class="computer">
                    <img src="./img/jpg/forth-page-swiper3.jpg">
                    <div class="box">
                        <p class="minute"><span>2</span>mins</p>
                        <p class="thumb">向上路實景圖</p>
                    </div>
                </div>
            </div>
            <img src="./img/svg/arrow-left.svg" class="prev">
            <img class="next" src="./img/svg/arrow-right.svg">
        </div>
    </div>
    <div class="fifth-page">
        <div class="titleBox">
            <h2 class="ch">東海書香文教區 科技菁英移居城</h2>
            <div class="paraBox">
                <div class="line"></div>
                <p class="para">藝文風氣鼎盛、欣欣向榮的東海商圈，喜迎科技新貴!2分鐘-東海商圈輕鬆掌握，<br>10分鐘-家樂福、JMall、榮總+澄清醫院滿足所有生活所需，菁英生活圈完美成形。
                </p>
            </div>
        </div>
        <div class="bg">
            <div class="imgBox">
                <img src="./img/jpg/fifth-page-bg1.jpg" class="computer">
                <img src="./img/jpg/fifth-page-bg1-ph.jpg" class="phone">
            </div>
            <div class="imgBox">
                <img src="./img/jpg/fifth-page-bg2.jpg" class="computer">
                <img src="./img/jpg/fifth-page-bg2-ph.jpg" class="phone">
            </div>
            <div class="imgBox">
                <img src="./img/jpg/fifth-page-bg3.jpg" class="computer">
                <img src="./img/jpg/fifth-page-bg3-ph.jpg" class="phone">
            </div>
            <div class="imgBox">
                <img src="./img/jpg/fifth-page-bg4.jpg" class="computer">
                <img src="./img/jpg/fifth-page-bg4-ph.jpg" class="phone">
            </div>
            <div class="imgBox">
                <img src="./img/jpg/fifth-page-bg5.jpg" class="computer">
                <img src="./img/jpg/fifth-page-bg5-ph.jpg" class="phone">
            </div>
            <div class="imgBox">
                <img src="./img/jpg/fifth-page-bg6.jpg" class="computer">
                <img src="./img/jpg/fifth-page-bg6-ph.jpg" class="phone">
            </div>
            <div class="imgBox computer">
                <img src="./img/jpg/fifth-page-bg7.jpg">
            </div>
        </div>
        <div class="titleBox">
            <h2 class="en">A Literary Education City </h2>
            <h2 class="en">That Attracts Tech Elite Migration.</h2>
        </div>
    </div>
    <div class="sixth-page">
        <div class="titleBox">
            <h2 class="en">Prime Location </h2>
            <h2 class="en">For Luxury Living Area.</h2>
        </div>
        <div class="left">
            <div class="titleBox ">
                <h2 class="ch">輕奢自住 新東京里山文旅</h2>
                <div class="paraBox">
                    <div class="line"></div>
                    <p class="para">將日系簡約結合山的紋理，揉合出最融洽的一席佳作；<br>
                        頂樓花園與不遠處的連綿山巒相映成趣，誠摯地邀請綠<br>
                        意至府上作客，如同里山典範，居住精華地段，也能享<br>
                        有永續森活。</p>
                </div>
            </div>
        </div>

        <div class="imgBox">
            <div class="box">
                <img src="./img/jpg/night-view.jpg">
                <span class="night-thumb">夜景外觀3D示意圖</span>
            </div>
            <div class="box">
                <img src="./img/jpg/sun-view.jpg">
                <span class="sun-thumb">日景外觀3D示意圖</span>
            </div>
            <div class="dragBar">
                <p>
                    < </p>
                        <p>></p>
            </div>
        </div>
    </div>
    <div class="seventh-page">
        <div class="top">
            <div class="titleBox">
                <h2 class="en">Design That Makes</h2>
                <h2 class="en">A Good Impression On All Ages.</h2>
            </div>
            <div class="titleBox">
                <h2 class="ch">全齡共享 12項好感設計公設</h2>
                <div class="paraBox">
                    <div class="line"></div>
                    <p class="para">住戶體驗出發、實用本位至上、精心策畫12項全齡化公設，步入氣派大廳-<br>
                        彷彿踏入日本皇居旁的虹夕諾雅五星級飯店，讓回家也成為一種享受，不僅<br>
                        令人放鬆卸下一襲疲倦，更忘卻門外的喧譁嘈雜。</p>
                </div>
            </div>
        </div>
        <div class="bottom">
            <div class="imgBox">
                <img src="./img/jpg/seventh-page-bg1.jpg">
                <span>氣派大廳3D示意圖</span>
            </div>
            <div class="imgBox">
                <img src="./img/jpg/seventh-page-bg2.jpg">
                <span>文旅俱樂部3D示意圖</span>
            </div>
            <div class="imgBox">
                <img src="./img/jpg/seventh-page-bg3.jpg">
                <span>喬山健身房3D示意圖</span>
            </div>
            <div class="imgBox">
                <div class="box">
                    <img src="./img/jpg/seventh-page-bg4.jpg">
                    <span>氣派大廳3D示意圖</span>
                </div>
                <img src="./img/svg/seventh-page-smallpara.svg" class="seventh-page-small-text">
            </div>
            <div class="imgBox">
                <img src="./img/jpg/seventh-page-bg3.jpg">
                <span>耕讀圖書館3D示意圖</span>
            </div>
        </div>
    </div>

    <div class="fancyBox">
        <img src alt="Error">
        <div class="close">

        </div>
    </div>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.8.2/pixi.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/9.2.3/swiper-bundle.min.js"></script>
<script>
    window.onload = () => {

        function splitText(wrap) {
            wrap = document.querySelectorAll(`${wrap}`);
            wrap.forEach((item, i) => {
                text = item.innerText

                item.innerHTML = null
                let str = `${text}`;
                let brExp = /\n/i;
                let arrElement = [];
                let arr = str.split(brExp)
                arr.forEach((item) => {
                    item = item.split("");

                    let a = item.map((item2, i) => {

                        if (item2 == " ") {
                            item2 = `<span class="blind" style="display:inline-block"><span>\xa0</span></span>`
                            return item2
                        } else {
                            item2 = `<span class="blind" style="display:inline-block"><span>${item2}</span></span>`
                            return item2
                        }
                    })
                    arrElement.push(a)
                })
                let finalStr = arrElement.map((item) => {
                    return item.join("")

                })

                item.innerHTML = finalStr.join("<br/>");
            })
        }
        splitText(".titleBox .en")
        splitText(".titleBox .ch")
        const speaker = document.querySelector(".speaker");
        const video = document.querySelector("video")
        const on = document.querySelector(".on")
        const off = document.querySelector(".off")
        let flag = false
        speaker.addEventListener("click", (e) => {
            flag = !flag;
            if (flag) {
                on.classList.add("active")
                off.classList.remove("active")
                video.muted = false
            } else {
                off.classList.add("active")
                on.classList.remove("active")
                video.muted = true
            }
        })
        function seaGullAnimation() {
            let gg = gsap.timeline({ repeat: -1 })
            gg.from(".seagullBox :nth-child(1)", {
                opacity: 0,
                x: 10,
                y: 10,
                duration: 1.2
            }).from(".seagullBox :nth-child(3)", {
                opacity: 0,
                x: 10,
                y: 10,
                duration: 1.2
            }, "<+0.3").to(".seagullBox :nth-child(1)", {
                opacity: 0,
                duration: 1
            }, "<+0.3").from(".seagullBox :nth-child(2)", {
                opacity: 0,
                x: 10,
                y: 10,
                duration: 1.2
            }, "<+0.2").to(".seagullBox :nth-child(3)", {
                opacity: 0,
                duration: 1
            }, "<+0.3").from(".seagullBox :nth-child(4)", {
                opacity: 0,
                x: 10,
                y: 10,
                duration: 1.2
            }, "<+0.4").to(".seagullBox :nth-child(2)", {
                opacity: 0,
                duration: 1
            }, "<-0.1").to(".seagullBox :nth-child(4)", {
                opacity: 0,
                duration: 1
            }, "<+0.4")


        }

        seaGullAnimation()

        function swiper() {
            const swiper1 = new Swiper('.second-page .swiper', {
                speed: 1000,
                slidesPerView: 1,
                enabled: false,
                breakpoints: {
                    821: {  //当屏幕宽度大于等于768 
                        slidesPerView: 6,
                        freeMode: true,
                        enabled: true,
                    },
                }
            })

            const swiper2 = new Swiper('.forth-page .swiper', {
                speed: 1000,
                slidesPerView: 1,
                loop: true,
                breakpoints: {
                    821: {
                        slidesPerView: 3,
                        centeredSlides: true,
                    },

                }
            })
            const prev = document.querySelector(".forth-page .prev")
            const next = document.querySelector(".forth-page .next")
            prev.addEventListener("click", () => {
                swiper2.slidePrev();
            })
            next.addEventListener("click", () => {
                swiper2.slideNext();
            })
        }
        swiper()

        function thirdPageCenter() {
            const wrapper = document.querySelector(".third-page .imgBox")
            const target = document.querySelector(".third-page .imgBox img")
            setTimeout(() => {
                wrapper.scrollTo(target.clientWidth * 0.33, 0)
            }, 0);
        }

        thirdPageCenter()

        function drag(wrap, bar, target) {
            const wrapper = document.querySelector(wrap);
            const dragBar = document.querySelector(bar);
            const targetView = document.querySelector(target);
            if (window.innerWidth > 1024) {

                wrapper.addEventListener("mousedown", (e) => {
                    let parentWidth = wrapper.clientWidth;
                    let ratio;
                    let dragWidth = dragBar.clientWidth / 2
                    let ratio2;

                    document.onmousemove = (j) => {
                        j.preventDefault()

                        let mouseX = j.clientX - (window.innerWidth - parentWidth);

                        ratio = mouseX / parentWidth * 100;
                        ratio2 = mouseX / parentWidth * 100 + (dragWidth / parentWidth * 100);

                        if (mouseX <= -dragWidth) {
                            dragBar.style.left = `${0 - dragWidth}px`;
                            targetView.style.clipPath = `polygon(0 0 , 0% 0  ,0% 100% ,0 100%, 0 0)`;
                            return
                        } else if (mouseX >= parentWidth * 0.98) {
                            dragBar.style.left = `${98.5}%`;
                            targetView.style.clipPath = `polygon(0 0 , 100% 0  ,100% 100% ,0 100%, 0 0)`;
                            return
                        }
                        window.requestAnimationFrame(() => {
                            dragBar.style.left = `${ratio}%`;
                            targetView.style.clipPath = `polygon(0 0 , ${ratio2}% 0  ,${ratio2}% 100% ,0 100%, 0 0)`;
                        });
                    }
                    document.onmouseup = (e) => {

                        document.onmousemove = null
                    }

                })
            } else {
                wrapper.addEventListener("touchstart", (e) => {
                    e.preventDefault()
                    let parentWidth = wrapper.clientWidth;
                    let ratio;
                    let dragWidth = dragBar.clientWidth / 2
                    let ratio2;

                    document.ontouchmove = (j) => {


                        let mouseX = j.touches[0].clientX - (window.innerWidth - parentWidth);

                        ratio = mouseX / parentWidth * 100;
                        ratio2 = mouseX / parentWidth * 100 + (dragWidth / parentWidth * 100);

                        if (mouseX <= -dragWidth) {
                            dragBar.style.left = `${0 - dragWidth}px`;
                            targetView.style.clipPath = `polygon(0 0 , 0% 0  ,0% 100% ,0 100%, 0 0)`;
                            return
                        } else if (mouseX >= parentWidth * 0.98) {
                            targetView.style.clipPath = `polygon(0 0 , 100% 0  ,100% 100% ,0 100%, 0 0)`;
                            return
                        }
                        window.requestAnimationFrame(() => {
                            dragBar.style.left = `${ratio}%`;
                            targetView.style.clipPath = `polygon(0 0 , ${ratio2}% 0  ,${ratio2}% 100% ,0 100%, 0 0)`;
                        });
                    }
                    document.ontouchend = (e) => {
                        document.ontouchmove = null
                    }

                })
            }
        }
        drag(".sixth-page .imgBox", ".sixth-page .imgBox .dragBar", ".sixth-page .imgBox > :nth-child(2)")

        function firstPageAnimation() {
            let gg = gsap.timeline()

            gg.from(".first-page video", {
                scale: 1.1,
                duration: 2,
                opacity: 0,
            })
        }
        firstPageAnimation()

        //windowSize = ture = 手機板
        let windowSize;
        if (window.innerWidth >= 821) {
            windowSize = false
        } else {
            windowSize = true
        }

        function halfPageAnimation() {
            let gg = gsap.timeline({
                scrollTrigger: {
                    trigger: ".second-half-page",
                    start: `top 65%`,
                    toggleActions: "play none none reverse"
                }
            })
            gg.from(".second-half-page .right .imgBox img", {
                opacity: 0,
                x: 60,
                duration: 1.2
            }).from(".second-half-page .left", {
                opacity: 0,
                x: -60,
                duration: 1.2
            }, "<")

            let gg2 = gsap.timeline({
                scrollTrigger: {
                    trigger: ".second-half-page",
                    start: `center ${windowSize ? "75%" : "100%"}`,
                    scrub: 1,
                    end: `+=${window.innerHeight * 0.8}`,
                }
            })

            gg2.from(".second-half-page .maoyoung > :nth-child(1)", {
                opacity: 0,
                x: 60,
                duration: 1
            }).from(".second-half-page .maoyoung > :nth-child(2)", {
                opacity: 0,
                x: -60,
                duration: 1
            }, "<").from(".second-half-page", {
                duration: 1
            })
        }
        halfPageAnimation()

        function secondPageAnimation() {
            if (windowSize) {

                const slides = document.querySelectorAll(".second-page .swiper-slide")
                let gg = gsap.timeline({
                    scrollTrigger: {
                        trigger: ".second-page",
                        start: `center center`,
                        scrub: true,
                    }
                })

                for (let i = 1; i < slides.length; i++) {
                    gg.to('.second-page .swiper-wrapper', {
                        x: `-${i}00%`,
                        duration: 1
                    })
                }
            } else {

                let gg = gsap.timeline({
                    scrollTrigger: {
                        trigger: ".second-page",
                        start: `center 100%`,
                        toggleActions: "play none none reverse"
                    }
                })
                gg.from(".second-page .bg", {
                    opacity: 0,
                    y: 35,
                    duaration: 1.4
                }).from(".second-page .island", {
                    opacity: 0,
                    duaration: 1.2
                }, "<+0.6").from(".second-page .swiper-wrapper > :nth-child(odd)", {
                    opacity: 0,
                    y: 30,
                    duaration: 1.2,
                    stagger: 0.15
                }, "<+0.6").from(".second-page .swiper-wrapper > :nth-child(even)", {
                    opacity: 0,
                    y: 30,
                    duaration: 1.2,
                    stagger: 0.15
                }, ">-0.2").from(".second-page .swiper-wrapper .swiper-slide p", {
                    opacity: 0,
                    y: 30,
                    duaration: 0.6,
                    stagger: 0.15
                }, "<+0.5")
            }

        }
        secondPageAnimation()

        function createGlow({ number, color }) {
            const styles = {
                glow: {
                    position: "absolute",
                    transformOrigin: "center bottom",
                    overflow: "hidden",
                    width: "100%",
                    height: "100%",
                },
                dot: {
                    position: "absolute",
                    width: "0.2vw",
                    height: "0.2vw",
                    borderRadius: "50%",
                    backgroundColor: color,
                    boxShadow: `0 0 ${windowSize ? "4px" : "5px"} 2.5px ` + color,
                    animationName: "glow",
                    animationTimingFunction: "linear",
                    animationFillMode: "forwards",
                    animationIterationCount: "infinite",
                    bottom: "-20px"
                }
            };
            let dot = [];
            for (let i = 0; i < number; i++) {
                dot.push(
                    {
                        x: Math.floor(Math.random() * 94 + 3) + "%",
                        scale: Math.random() * 1.5 + 0.3,
                        duration: Math.random() * 7 + 3 + "s",
                        delay: Math.random() * 6 + "s",
                    }
                )
            }
            const glowDiv = document.createElement("div");
            glowDiv.className = "glow";
            Object.assign(glowDiv.style, styles.glow);

            dot.forEach((item, i) => {
                const dotDiv = document.createElement("div");
                dotDiv.className = "glow-dot";
                Object.assign(dotDiv.style, styles.dot, { left: item.x, animationDuration: item.duration, animationDelay: item.delay, transform: `scale(${item.scale})` });
                glowDiv.appendChild(dotDiv);
            });

            return glowDiv;
        }

        const glowElement = createGlow({ number: 15, color: "#fff" });
        const glowWrapper = document.querySelector(".glow-wrapper")
        glowWrapper.appendChild(glowElement); // 插入到 body 中作為例子

        function closeHandImg() {
            const box = document.querySelector(".third-page .imgBox")
            const hand = document.querySelector(".third-page .hand")
            let startX = null;
            box.addEventListener('touchstart', function (e) {
                startX = e.touches[0].pageX;
            });
            box.addEventListener("touchmove", (e) => {
                if (startX !== null) {
                    const distance = e.touches[0].pageX - startX;
                    if (Math.abs(distance) > box.clientWidth / 2.5) {

                        hand.style.opacity = "0"
                        startX = null;
                    }
                }

            })
        }
        closeHandImg()

        function thirdPageAnimation() {
            let gg = gsap.timeline({
                scrollTrigger: {
                    trigger: ".third-page",
                    start: "top center",
                }
            })
            gg.from(".third-page .en > span", {
                x: 30,
                opacity: 0,
                stagger: 0.05
            }).from(".third-page .imgBox", {
                y: 30,
                opacity: 0,
                duration: 1.4
            }, ">-0.3")
        }
        thirdPageAnimation()


        function forthPageAnimation() {
            let gg = gsap.timeline({
                scrollTrigger: {
                    trigger: ".forth-page",
                    start: "top center",
                }
            })
            gg.from(".forth-page .ch > span", {
                x: 30,
                opacity: 0,
                stagger: 0.05
            }).from(".forth-page .paraBox .para", {
                y: 30,
                opacity: 0,
                stagger: 0.05
            }, ">-0.3").from(".forth-page .paraBox .line", {
                scaleX: 0,
                opacity: 1.2
            }, ">-0.3").from(".forth-page .swiper-slide-active", {
                y: 30,
                opacity: 0,
                duration: 1.4
            }, "<").from(".forth-page .swiper-slide-prev", {
                y: 30,
                opacity: 0,
                duration: 1.4
            }, "<+0.3").from(".forth-page .swiper-slide-next", {
                y: 30,
                opacity: 0,
                duration: 1.4
            }, "<+0.3")
        }
        forthPageAnimation()
        function fifthPageAnimation() {
            let gg = gsap.timeline({
                scrollTrigger: {
                    trigger: ".fifth-page",
                    start: "top center",
                }
            })
            gg.from(".fifth-page .ch > span", {
                x: 30,
                opacity: 0,
                stagger: 0.05
            }).from(".fifth-page .paraBox .para", {
                y: 30,
                opacity: 0,
                stagger: 0.05
            }, ">-0.3").from(".fifth-page .paraBox .line", {
                scaleX: 0,
                opacity: 1.2
            }, ">-0.3").from(".fifth-page .bg img", {
                y: 30,
                opacity: 0,
                duration: 1.4,
                stagger: 0.1
            }, "<").from(".fifth-page .bg img", {
                scale: 1.2,
                duration: 1.8,
            }, "<")
            let gg2 = gsap.timeline({
                scrollTrigger: {
                    trigger: ".fifth-page .en > span",
                    start: "top 90%",
                }
            })
            gg2.from(".fifth-page .en > span", {
                x: 30,
                opacity: 0,
                stagger: 0.05
            })
        }
        fifthPageAnimation()

        function sixthPageAnimation() {
            let gg = gsap.timeline({
                scrollTrigger: {
                    trigger: ".sixth-page",
                    start: "top center",
                }
            })
            gg.from(".sixth-page .en > span", {
                x: 30,
                opacity: 0,
                stagger: 0.05
            }).from(".sixth-page .ch > span", {
                x: 30,
                opacity: 0,
                stagger: 0.05
            }, "<+0.3").from(".sixth-page .paraBox .para", {
                y: 30,
                opacity: 0,
                stagger: 0.05
            }, ">-0.3").from(".sixth-page .paraBox .line", {
                scaleX: 0,
                opacity: 1.2
            }, ">-0.3").from(".sixth-page .imgBox", {
                y: 30,
                opacity: 0,
                duration: 1.4,
                stagger: 0.1
            }, "<")
        }
        sixthPageAnimation()

        function seventhPageAnimation() {
            let gg = gsap.timeline({
                scrollTrigger: {
                    trigger: ".seventh-page",
                    start: "top center",
                }
            })
            gg.from(".seventh-page .en > span", {
                x: 30,
                opacity: 0,
                stagger: 0.05
            }).from(".seventh-page .ch > span", {
                x: 30,
                opacity: 0,
                stagger: 0.05
            }, "<+0.3").from(".seventh-page .paraBox .para", {
                y: 30,
                opacity: 0,
                stagger: 0.05
            }, ">-0.3").from(".seventh-page .paraBox .line", {
                scaleX: 0,
                opacity: 1.2
            }, ">-0.3")

            const seventhImg = document.querySelectorAll(".seventh-page .imgBox")
            seventhImg.forEach((item, i) => {
                this[`gg${i}`] = gsap.timeline({
                    scrollTrigger: {
                        trigger: item,
                        start: `top ${i != seventhImg.length - 1 ? "80%" : "95%"}`,
                    }
                })
                this[`gg${i}`].from(item, {
                    opacity: 0,
                    x: i % 2 != 0 ? "-100%" : "100%",
                    duration: 1.8,
                }).from(item.firstElementChild, {
                    scale: 1.3,
                    duration: 2.5,
                }, "<")

            })
        }
        seventhPageAnimation()

        let displacementSprite;
        let displacementSprite2;
        function waterEffect() {
            // 图片精灵
            let preview;
            // 置换图精灵

            // 滤镜
            let displacementFilter;
            // 舞台（一个容器），这里面包括了图片精灵、置换图精灵
            let stage;
            let x;
            let playground = document.getElementById("pixi-container");
            let option = {
                width: playground.clientWidth,
                height: playground.clientHeight,
                transparent: true,
            }

            // 创建一个 Pixi应用
            const app = new PIXI.Application(option);
            // 获取渲染器
            let renderer = app.renderer;

            // renderer.view 是 Pixi 创建的一个canvas
            // 把 Pixi 创建的 canvas 添加到页面上
            playground.appendChild(renderer.view);

            // 创建一个容器 
            stage = new PIXI.Container();

            // 根据图片的 url，创建图片精灵
            preview = PIXI.Sprite.fromImage(window.innerWidth > 820 ? "./img/jpg/second-page-bg.jpg" : "./img/jpg/second-page-bg-ph.jpg");
            // preview = PIXI.Sprite.fromImage(window.innerWidth > 820 ? "https://ws.srl.tw/cs/2023041711471618/img/img2023042410463969.jpg" : "https://ws.srl.tw/cs/2023041711471618/img/img2023042410465025.jpg");

            preview.width = playground.clientWidth
            preview.height = playground.clientHeight;
            window.addEventListener('resize', () => {
                preview.width = playground.clientWidth
                preview.height = playground.clientHeight;
                option.width = playground.clientWidth;
                option.width = playground.clientHeight;
            });
            preview.x = -10;
            preview.y = -10;
            // 创建置换图精灵，在创建置换滤镜时会用到这个精灵 
            displacementSprite = PIXI.Sprite.fromImage('./img/jpg/clouds.jpg');



            // 设置置换图精灵为平铺模式
            displacementSprite.texture.baseTexture.wrapMode = PIXI.WRAP_MODES.REPEAT;

            // 创建一个置换滤镜
            displacementFilter = new PIXI.filters.DisplacementFilter(displacementSprite);
            stage.filters = [displacementFilter];
            // 添加 图片精灵 到舞台
            stage.addChild(preview);

            // 添加 置换图精灵 到舞台 
            stage.addChild(displacementSprite);

            // 把 stage 添加到根容器上
            app.stage.addChild(stage);

            // 置换图精灵的移动速度


        }

        let velocity = window.innerWidth > 500 ? 1.7 : 0.6;

        function waterAnimate() {
            let raf = requestAnimationFrame(waterAnimate);
            // 改变置换图精灵的位置
            displacementSprite.x += velocity;
            displacementSprite.y += velocity;
        }
        waterEffect()
        waterAnimate()
        function fancyBox() {
            const image = document.querySelectorAll(".fifth-page .imgBox img");
            const fancyBox = document.querySelector(".fancyBox");
            const close = document.querySelector(".fancyBox .close")
            const fancyImg = document.querySelector(".fancyBox img")
            image.forEach((item, i) => {
                item.addEventListener("click", (e) => {
                    const url = e.target.currentSrc
                    fancyBox.style.opacity = 1;
                    fancyBox.style.pointerEvents = "auto";
                    fancyImg.setAttribute("src", url)
                })
            })
            close.addEventListener("click", () => {
                fancyBox.style.opacity = 0;
                fancyBox.style.pointerEvents = "none";
                setTimeout(() => {
                    fancyImg.removeAttribute("src")
                }, 350)

            })
            fancyBox.addEventListener("click", () => {
                fancyBox.style.opacity = 0;
                fancyBox.style.pointerEvents = "none"
                setTimeout(() => {
                    fancyImg.removeAttribute("src")
                }, 350)
            })
            fancyBox.addEventListener("wheel", (e) => {
                e.preventDefault()
            })
            fancyBox.addEventListener("touchmove", (e) => {
                e.preventDefault()
            })
        }
        fancyBox()
        const blogDatabase = {
            usersCollection: {
                id: null,
                username: null,
                avatar: null,
                role: admin
            },
            postCollection: {
                id: null,
                category: null,
                timestamp: null,
                userID: null,
                data: {
                    banner: null,
                    title: null,
                    paragraph: null
                }
            },
            postCommentCollection: {
                timestamp: null,
                postID: null,
                text: null
            },
            followCollection: {
                userID: null,
                postID: [postID1, postID2]
            }
        }



    }
</script>

</html>


<!-- database -->

<!-- 

                   users(collection):
                                    {
                                        id:null,
                                        username:null,
                                        avatar:null,
                                   
                                        role:admin
                                    }
                  /
                 /
                /                      {
                                        id:null
                                        category:null,
                                        time:null,
                                        userID:null,
blog(database): 一 post(collection):   
                \                       data:{
                                            banner:null,
                                            title:null,
                                            paragraph:null
                                        }
                 \                     }
                  \
                   postComment(collection):{
                        timestamp:null,
                        postID:null,
                        text:null
                   }
                                            



 
 -->